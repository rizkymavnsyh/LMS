!function(e){let o,n;e.fn._add_course_to_cart=function(){e(document).on("submit","form[name=form-add-course-to-cart]",function(t){o=e(this),t.preventDefault();e(this);if(n.length&&"yes"!==localize_lp_woo_js.woo_enable_signup_and_login_from_checkout&&"yes"!==localize_lp_woo_js.woocommerce_enable_guest_checkout&&e('body:not(".logged-in")')){n.trigger("click");let t=e("form[name=loginpopopform]");if(!t.find(".params-purchase-code").length){let e=o.find("input[name=course-id]").val();t.append('<p class="params-purchase-code"></p>');let n=t.find(".params-purchase-code");n.append('<input type="hidden" name="add-to-cart" value="'+e+'" />'),n.append('<input type="hidden" name="purchase-course" value="'+e+'" />')}return!1}let a=o.find(".btn-add-course-to-cart"),i=e(this).serialize();return i+="&action=lpWooAddCourseToCart",e.ajax({url:localize_lp_woo_js.url_ajax,data:i,method:"post",dataType:"json",success:function(n){1===n.code?void 0!==n.redirect_to&&""!==n.redirect_to?window.location=n.redirect_to:(e(".wrap-btn-add-course-to-cart").each(function(t){let a=e(this);a.find("[name=course-id]").val()===o.find("[name=course-id]").val()&&a.append(n.button_view_cart)}),o.remove(),e("div.widget_shopping_cart_content").html(n.widget_shopping_cart_content),e(".minicart_hover .items-number").html(n.count_items)):alert(n.message)},beforeSend:function(){a.append('<span class="fa fa-spinner"></span>')},complete:function(){a.find("span").removeClass("fa fa-spinner")},error:function(e){console.log(e)}}),!1})};window.addEventListener("pageshow",function(e){(e.persisted||void 0!==window.performance&&"back_forward"==String(window.performance.getEntriesByType("navigation")[0].type))&&location.reload()}),e(function(){n=e(".thim-login-popup .login"),e.fn._add_course_to_cart()})}(jQuery);
